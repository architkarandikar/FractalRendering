//tealium universal tag - utag.48 ut4.0.201508271734, Copyright 2015 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={};utag.o[loader].sender[id]=u;if(utag===undefined){utag={};}if(utag.ut===undefined){utag.ut={};}if(utag.ut.loader===undefined){u.loader=function(o){var a,b,c,l;a=document;if(o.type==="iframe"){b=a.createElement("iframe");b.setAttribute("height","1");b.setAttribute("width","1");b.setAttribute("style","display:none");b.setAttribute("src",o.src);}else if(o.type==="img"){utag.DB("Attach img: "+o.src);b=new Image();b.src=o.src;return;}else{b=a.createElement("script");b.language="javascript";b.type="text/javascript";b.async=1;b.charset="utf-8";b.src=o.src;}if(o.id){b.id=o.id;}if(typeof o.cb==="function"){if(b.addEventListener){b.addEventListener("load",function(){o.cb();},false);}else{b.onreadystatechange=function(){if(this.readyState==="complete"||this.readyState==="loaded"){this.onreadystatechange=null;o.cb();}};}}l=o.loc||"head";c=a.getElementsByTagName(l)[0];if(c){utag.DB("Attach to "+l+": "+o.src);if(l==="script"){c.parentNode.insertBefore(b,c);}else{c.appendChild(b);}}};}else{u.loader=utag.ut.loader;}
u.ev={'view':1};u.initialized=false;u.map={"device_type":"e1.device_type,e2.device_type,e3.device_type,e4.device_type,e5.device_type","fb_pixel_id":"pixel_id","fb_event_homepage":"e1.fb_event","fb_event_search":"e2.fb_event","fb_event_begin_booking":"e3.fb_event","fb_event_purchase":"e4.fb_event","fb_custom_event_name":"e1.event,e4.event","entity.checkout.hotel.isoCheckInDate":"e4.check_in_date","entity.checkout.hotel.isoCheckOutDate":"e4.check_out_date","entity.hotels.search.starRating":"e2.hotel_star_rating","entity.hotels.listOfHotels.0.starRating":"e3.hotel_star_rating","entity.hotels.search.city":"e2.city","entity.hotels.search.country":"e2.country","entity.hotels.search.province":"e2.state","entity.hotels.search.hotelParameters.checkInDate":"e2.check_in_date","entity.flightSearch.searchParameters.isoFormatDepartureDate":"e2.check_out_date","entity.hotels.search.hotelParameters.lengthOfStay":"e2.length_of_stay","entity.hotels.search.hotelParameters.numberOfGuests":"e2.number_of_people","context.site.siteName":"e1.POS,e2.POS,e3.POS,e4.POS,e5.POS","entity.checkout.cartTotal.currency":"e4.currency","entity.hotels.listOfHotels.0.hotelName":"e3.hotel_brand","hotel_booking_date":"e4.booking_window,e2.booking_window,e3.booking_window","fb_content_type":"e1.content_type,e2.content_type,e3.content_type,e4.content_type","entity.hotels.listOfHotels.0.hotelCityName":"e3.city","entity.hotels.listOfHotels.0.hotelCountryName":"e3.country","entity.hotels.listOfHotels.0.hotelProvinceName":"e3.state","entity.hotels.listOfHotels.0.checkInDate":"e3.checkin_date","entity.hotels.listOfHotels.0.checkOutDate":"e3.checkout_date","entity.hotels.listOfHotels.0.lengthOfStay":"e3.length_of_stay","entity.hotels.listOfHotels.0.mostEconomicalRoomAvailable.averagePrice.amount":"e3.price","entity.tripDetails.flightOffer.airlineCode":"e3.airline","fb_event_page_view":"e5.fb_event","entity.hotels.listOfHotels.0.numberOfGuests":"e3.number_of_people","entity.hotels.listOfHotels.0.hotelId":"e3.content_ids","entity.checkout.cartTotal.amount":"e4.price","entity.checkout.hotel.lengthOfStay":"e4.length_of_stay","pageInfo.authInfo.rewardsStatus.membershipTier":"e4.loyalty_tier","entity.checkout.hotel.hotelName":"e4.hotel_brand","entity.checkout.flightOffer.flight.legs[0].segments[0].carrierCode":"e4.airline","entity.checkout.hotel.hotelId":"e4.content_ids","entity.hotels.search.hotelParameters.checkOutDate":"e2.check_out_date","entity.flightSearch.searchParameters.isoFormatReturnDate":"e2.check_in_date","entity.checkout.car.totalPrice.currency":"e3.currency","entity.tripDetails.flightOffer.totalPrice.currency":"e3.currency","entity.hotels.listOfHotels.0.mostEconomicalRoomAvailable.strikeThruPrice.currency":"e3.currency","entity.tripDetails.totalPrice.currency":"e3.currency","entity.carSearch.searchCriteria.isoFormatPickUpDate":"e2.pick_up_date","entity.carSearch.searchCriteria.isoFormatDropOffDate":"e2.drop_off_date","entity.hotels.listOfHotels.0.regionId":"e3.region_id","entity.hotels.search.hotelParameters.regionId":"e2.region_id","entity.checkout.hotel.regionId":"e4.region_id","entity.flightSearch.searchParameters.arrivalAirport":"e1.arrival.TLA","entity.flightSearch.searchParameters.departureAirport":"e1.departure.TLA","entity.tripDetails.flightOffer.flight.legs.0.departureAirportCode":"e1.departure.TLA.flight1","entity.tripDetails.flightOffer.flight.legs.0.arrivalAirportCode":"e1.arrival.TLA.flight1","entity.checkout.hotel.cityCode":"e1.confirmationpage.destination","entity.tripDetails.flightOffer.totalPrice.amount":"e1.flightdetails.totalprice","domain":"e1.Domain_LOB,e2.Domain_LOB,e3.Domain_LOB,e4.Domain_LOB,e5.Domain_LOB","main_margin":"e1.calculated_margin","qp.dcty":"e1.packagesearch.departurecity","entity.checkout.hotel.numberOfGuests":"e1.hotelpayment.numberofguests"};u.extend=[function(a,b){try{if(1){b['fb_pixel_id']='468990633205284';b['fb_content_type']='product';b['fb_product_catalog_id']='700524630081055'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['pageInfo.pageName'].toString().toLowerCase().indexOf('homepage'.toLowerCase())>-1||b['pageInfo.pageName'].toString().toLowerCase().indexOf('launch_/'.toLowerCase())>-1){b['fb_event_homepage']='reportCustomEvent';b['fb_custom_event_name']='Homepage'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['pageInfo.pageName'].toString().toLowerCase().indexOf('search'.toLowerCase())>-1){b['fb_event_search']='reportSearch'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['pageInfo.pageName'].toString().toLowerCase().indexOf('infosite'.toLowerCase())>-1||b['pageInfo.pageName'].toString().toLowerCase().indexOf('ratedetails'.toLowerCase())>-1){b['fb_event_begin_booking']='reportViewContent'}}catch(e){utag.DB(e)}},function(a,b){try{if(b['pageInfo.pageName'].toString().toLowerCase().indexOf('checkout.confirmation'.toLowerCase())>-1){b['fb_event_purchase']='reportCustomEvent';b['fb_custom_event_name']='Purchase'}}catch(e){utag.DB(e)}},function(a,b){try{if((b['pageInfo.pageName'].toString().toLowerCase().indexOf('checkout.confirmation'.toLowerCase())<0&&b['pageInfo.pageName'].toString().toLowerCase().indexOf('ratedetails'.toLowerCase())<0&&b['pageInfo.pageName'].toString().toLowerCase().indexOf('infosite'.toLowerCase())<0&&b['pageInfo.pageName'].toString().toLowerCase().indexOf('search'.toLowerCase())<0&&b['pageInfo.pageName'].toString().toLowerCase().indexOf('homepage'.toLowerCase())<0&&b['pageInfo.pageName'].toString().toLowerCase().indexOf('launch_/'.toLowerCase())<0)){b['fb_event_page_view']='reportPageView'}}catch(e){utag.DB(e)}},function(a,b){var checkin;if(b['entity.checkout.hotel.isoCheckInDate']){checkin=new Date(b['entity.checkout.hotel.isoCheckInDate']);}
else if(b['entity.hotels.search.hotelParameters.checkInDate']){checkin=new Date(b['entity.hotels.search.hotelParameters.checkInDate']);}
else if(b['entity.hotels.listOfHotels.0.checkInDate']){checkin=new Date(b['entity.hotels.listOfHotels.0.checkInDate']);}
if(b['entity.checkout.hotel.isoCheckInDate']||b['entity.hotels.search.hotelParameters.checkInDate']||b['entity.hotels.listOfHotels.0.checkInDate']){var one_day=24*60*60*1000;var today_date=new Date();today_date.setHours(0,0,0,0);b.hotel_booking_date=Math.round(Math.abs((today_date.getTime()-checkin.getTime())/(one_day)));}}];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){var c,d,e,f,i;u.data={};for(c=0;c<u.extend.length;c++){try{d=u.extend[c](a,b);if(d==false)return}catch(e){}};u.data.fb_event_list=[];u.data.fb_vars=[];u.data.fb_ob_vars={};for(var w in utag.loader.GV(u.map)){if(b[w]!==undefined&&b[w]!==""){t=u.map[w].split(",");for(z=0;z<t.length;z++){if(t[z].indexOf("fb_event")>-1){var ei=parseInt(t[z].substring(0,t[z].indexOf(".")).replace("e",""))-1;u.data.fb_ob_vars[ei]={};}}}}
for(var d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){if(e[f]=="pixel_id"){u.data[e[f]]=b[d];}
else if(e[f].indexOf("fb_event")>-1){var ei=parseInt(e[f].substring(0,e[f].indexOf(".")).replace("e",""))-1;u.data.fb_ob_vars[ei]["fb_event"]=b[d];u.data.fb_ob_vars[ei]["event_index"]=ei;}
else{var ei=parseInt(e[f].substring(0,e[f].indexOf(".")).replace("e",""))-1;u.data.fb_ob_vars[ei]=u.data.fb_ob_vars[ei]||{};u.data.fb_ob_vars[ei][e[f].substring(3,e[f].length)]=b[d];}}}}
(function(f,b,e,v,n,t,s){n=window.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)};n.version='1.0';n.pixelId=e;n.queue=[];t=f.createElement(b);t.async=true;t.src=v;s=f.getElementsByTagName(b)[0];s.parentNode.insertBefore(t,s)}(document,'script',u.data.pixel_id,document.location.protocol+'//connect.facebook.net/en_US/fbevents.js'));if(a=="view"){fbq('reportPageView');}
for(var j in u.data.fb_ob_vars){if(u.data.fb_ob_vars[j]["fb_event"]){var to=u.data.fb_ob_vars[j];var ta=u.data.fb_ob_vars[j]["fb_event"];fbq(ta,to);}}
}};utag.o[loader].loader.LOAD(id);})("48","expedia.main");}catch(error){utag.DB(error);}
