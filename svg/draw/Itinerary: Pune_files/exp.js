var SEAT_SELECTOR=(function(c){var b={travelerCount:0,data:{},constants:{SEAT_UNASSIGNED:"SEAT_UNASSIGNED"},setFlight:function(d){this.data.currentFlight=d;this.data[d]=this.data[d]||{};},setFlightTraveler:function(d){this.data[this.getCurrentFlight()].currentTraveler=d;if(!this.isCurrentTravelerSeatAssigned()){this.data[this.getCurrentFlight()][d]=this.constants.SEAT_UNASSIGNED;}},setFlightTravelerSeat:function(e,d,f){this.data[e][d]=f;},getCurrentFlight:function(){return this.data.currentFlight;},getCurrentFlightTraveler:function(){return this.data[this.getCurrentFlight()].currentTraveler;},getCurrentFlightTravelerIndex:function(){return this.data[this.getCurrentFlight()].currentTraveler-1;},getCurrentTravelerSeat:function(){return this.data[this.getCurrentFlight()][this.getCurrentFlightTraveler()]?this.data[this.getCurrentFlight()][this.getCurrentFlightTraveler()]:this.constants.SEAT_UNASSIGNED;},isCurrentTravelerSeatAssigned:function(){return(this.getCurrentTravelerSeat()!=this.constants.SEAT_UNASSIGNED);},getAssignedSeat:function(e,d){return this.data[e]?(this.data[e][d]||this.constants.SEAT_UNASSIGNED):this.constants.SEAT_UNASSIGNED;},setTravelerCount:function(d){this.travelerCount=d;},getTravelerCount:function(){return this.travelerCount;},getNonConfirmedPreferredSeatSelections:function(f){var d=new Array();for(var e=1;e<=this.travelerCount;e++){var g=this.getAssignedSeat(f,e);if((g!=this.constants.SEAT_UNASSIGNED)&&(!g.isGeneric)&&(g.isPreferred)&&(!g.isPreferredSeatSelectionConfirmed)){d.push(e);}}return d;},confirmAllCurrentPreferredSeatSelections:function(e){for(var d=1;d<=this.travelerCount;d++){var f=this.getAssignedSeat(e,d);if((f!=this.constants.SEAT_UNASSIGNED)&&(!f.isGeneric)&&(f.isPreferred)){f.isPreferredSeatSelectionConfirmed=true;}}},init:function(){this.data={};}};var a=function(d,f){var e=this;this.travelerView={element:d.find(".traveler_list .traveler"),init:function(){this.bindEvents();this.element.first().trigger("click");},getDefaultGenericSeatPreferenceForTraveler:function(h){var g=c("select#seatpreferenceID_traveler"+(h-1)+" option:selected");var i={seatName:g.text(),seatValue:g.val(),isPreferred:false,isGeneric:true};return i;},bindEvents:function(){var g=this.element,h=this;g.bind("click",function(m){var j=c(this),l=b.getCurrentFlightTraveler(),k=j.find(".traveler_no h5").attr("data-travelerno"),i=j.parent().find("#traveler"+l);if(h.isInfantInLap(k)){return;}h.updateSeatSelectionHeaderForSelectedTraveler(j,k);if(k!=l){h.updateSeatSelectionHeaderForPreviousTraveller(i,l);}b.setFlightTraveler(k);h.highlightTraveler(c(this));e.seatView.notifyTravelerChange();});},selectNextTravellerIfApplicable:function(){var j=b.getCurrentFlightTraveler();var i=c("#divSeatMapStaticContent_"+f);var k=i.find("div#traveler"+j+".traveler");var h=this.getNextSelectableTravelerNo(j);if(h==null){return;}var g=i.find("div#traveler"+h+".traveler");this.updateSeatSelectionHeaderForSelectedTraveler(g,h);this.updateSeatSelectionHeaderForPreviousTraveller(k,j);b.setFlightTraveler(h);this.highlightTraveler(g);e.seatView.notifyTravelerChange();},getNextSelectableTravelerNo:function(h){var g=parseInt(h);do{g=g+1;if(!this.checkIfTravelerExists(g)){return null;}}while(this.isInfantInLap(g));return g;},checkIfTravelerExists:function(g){return(b.getTravelerCount()>=g);},updateSeatSelectionHeaderForPreviousTraveller:function(g,h){if(g.parent().find(".traveler.highlighted").find("#travelerAction_"+h).find("h5").text()==(c("#seatMapText").attr("data-traveler-seatname-defaulttext"))){g.find("#travelerAction_"+h).find("h5").html(c("#seatMapText").attr("data-pending-seat-selection"));}},updateSeatSelectionHeaderForSelectedTraveler:function(h,g){if(h.find("#travelerAction_"+g).find("h5").text()==(c("#seatMapText").attr("data-pending-seat-selection"))){h.find("#travelerAction_"+g).find("h5").html(c("#seatMapText").attr("data-traveler-seatname-defaulttext"));}},isInfantInLap:function(g){return(this.element.find("#travelerAction_"+g).find("h5").text()==(c("#seatMapText").attr("data-infantinlap-seatpref")));},highlightTraveler:function(g){g.parent().find(".traveler.highlighted").removeClass("highlighted");g.addClass("highlighted");},updatePreviousTraveler:function(g){if(b.isCurrentTravelerSeatAssigned()){g.addClass("seat-selected");}},updateSeatForCurrentTraveler:function(h,g){this.updateSeatForTraveler(h,b.getCurrentFlightTraveler(),g);},updateSeatForTraveler:function(l,j,k){var i=(l&&l!=b.constants.SEAT_UNASSIGNED)?l.seatName:c("#seatMapText").attr("data-pending-seat-selection");var h=c("#seatMapText").data("preferred-seat");if(l.isPreferred&&h){i+=" <span>("+h+")</span>";}if(l!=b.constants.SEAT_UNASSIGNED){k.find("#traveler"+j).addClass("seat-selected");}var g=k.find("#traveler"+j+" .traveler_seat h5");g.html(i);}};this.seatView={element:d.find("#divSeatMapPreview"),init:function(){this.setDefaults();if(this.isGenericPreferenceView()){var i=this.element.find("#seatmapGenericPrefeference");this.bindSeatMapSelectEvents(i);}else{var k=this.element.find("div[class*=seat-avail], div[class*=seat-dis], div[class*=seat-pref]");this.bindSeatMapEvents(k);}var j=c("#travelersCountInTrip").val();b.setTravelerCount(j);for(var h=1;h<=j;h++){if(e.travelerView.isInfantInLap(h)){continue;}b.setFlightTraveler(h);var g=c("#seatPreference_"+f+"_T"+h).val();this.selectSeat(g);}},setDefaults:function(){var h=c("#travelersCountInTrip").val();for(var g=1;g<=h;g++){this.element.find("div[class*=seating-occupied-byTraveler"+g+"]").removeClass("seating-occupied-byTraveler"+g);}this.element.find("#seatmapGenericPrefeference").val(c("select#seatpreferenceID_traveler"+b.getCurrentFlightTravelerIndex()).val());},bindSeatMapEvents:function(i,h){var g=this;if(!h&&i.hasClass("seatguru-available")){i.bind("mouseenter",function(j){g.handleMouseEnter(j);}).bind("mouseleave",function(j){g.handleMouseLeave(j);});}i.bind("click",function(j){g.handleClick(j,c(this));});},bindSeatMapSelectEvents:function(g){g.bind("change",function(j){var i=c(this).find("option:selected");var h=this;var l={seatName:i.text(),seatValue:i.val(),isPreferred:false,isPreferredSeatSelectionConfirmed:false,isGeneric:true};b.setFlightTravelerSeat(f,b.getCurrentFlightTraveler(),l);var k=c(h).closest(".flight-box");e.travelerView.updateSeatForCurrentTraveler(l,k);if(!j.isTrigger){e.travelerView.selectNextTravellerIfApplicable();}});},selectSeat:function(g){if(this.isGenericPreferenceView()){var i=this.element.find("#seatmapGenericPrefeference");if(g!=""){i.val(g);}else{var h=c("select#seatpreferenceID_traveler"+(b.getCurrentFlightTravelerIndex())+" option:selected");i.val(h.val());}i.trigger("change");}else{if(g!=""){var j=this.getDivForSeat(g);j.trigger("click");}}},setTravelerLabel:function(g){d.find(".traveler_detail span").html(g);},notifyTravelerChange:function(){this.setTravelerLabel(b.getCurrentFlightTraveler());if(this.isGenericPreferenceView()){var g=this.element.find("#seatmapGenericPrefeference");g.val(b.getCurrentTravelerSeat().seatValue);}},handleMouseEnter:function(h){var g=c(h.target);g.parent().find("#"+g.attr("data-seatguru-dialog")).css({top:(h.pageY-this.offsetTop),left:(h.pageX-this.offsetLeft)}).fadeIn(100);},handleMouseLeave:function(h){var g=c(h.target);g.parent().find("#"+g.attr("data-seatguru-dialog")).fadeOut(100);},handleClick:function(j,g){j.preventDefault();if(this.isSeatOccupied(g)){return;}var h={travelerSeat:g.attr("data-seatname"),travelerNo:b.getCurrentFlightTraveler()},i=this.isPreferredSeat(g),k=c(j.target).closest(".flight-box");this.unselectPreviouslySelectedSeat(h,k);var l={seatName:h.travelerSeat,seatValue:h.travelerSeat,isPreferred:i,isPreferredSeatSelectionConfirmed:false,isGeneric:false};b.setFlightTravelerSeat(f,h.travelerNo,l);e.travelerView.updateSeatForCurrentTraveler(l,k);this.setSeatOccupied(g,h.travelerNo);e.handlePreferredSeatView();e.travelerView.selectNextTravellerIfApplicable();},setSeatOccupied:function(h,g){h.addClass("seating-occupied-byTraveler"+g);},unselectPreviouslySelectedSeat:function(h,i){var k=true,g=b.getAssignedSeat(f,h.travelerNo),j=(g==b.constants.SEAT_UNASSIGNED)?g:g.seatName;
selectedSeatElement=i.find("div[data-seatname='"+j+"']"),seatingOccupiedClassName="seating-occupied-byTraveler"+h.travelerNo;if(selectedSeatElement.length>0&&selectedSeatElement.hasClass(seatingOccupiedClassName)){selectedSeatElement.removeClass(seatingOccupiedClassName);}},isSeatOccupied:function(g){return g.hasClass(/^seating-occupied-byTraveler/);},isPreferredSeat:function(g){return g.hasClass(/^seat-pref/);},getDivForSeat:function(g){return this.element.find('div[data-seatname="'+g+'"]');},isGenericPreferenceView:function(){return this.element.find("#seatmapGenericPrefeference").length;}};this.handlePreferredSeatView=function(){var h=d.find("#preferredSeatSelectionMessage");var i=b.getNonConfirmedPreferredSeatSelections(f);var g=(i&&i.length!=0);if(g){h.find(".btn-close").click(function(){b.confirmAllCurrentPreferredSeatSelections(f);});h.show();this.displayWarningForNonConfirmedPreferredSeatSelections(i);}else{h.hide();}};this.displayWarningForNonConfirmedPreferredSeatSelections=function(l){if(l.length==0){return;}var i=d.find("#preferredSeatMsgHolder");var m=i.attr("preferred-seat-single-traveler");var h=i.attr("preferred-seat-multi-traveler");var j=d.find("#preferredSeatSelectionMessage").find(".seatMapInfoMessage");var k=null;if(l.length==1){k=m.replace(/\{0}/g,l[0]);}else{if(l.length>1){var g=l.splice(l.length-1,1);k=h.replace(/\{0}/g,l.join(", ")).replace(/\{1}/g,g);}}j.html(k);};this.seatView.init();d.find("#preferredSeatSelectionMessage").hide();this.travelerView.init();};c(".divSeatMapPopup").bind("switchFlight.seatAssigner",function(g,f){b.setFlight(f.flightId);var d=c("#divSeatMapStaticContent_"+f.flightId).find("#seatmapTravelerNameAndSeats").find("#traveler"+f.travelerNo);d.trigger("click");});c(".divSeatMapPopup").bind("init.seatAssigner",function(i,f,h,g){b.setFlight(h);b.setFlightTraveler(g);new a(c(f),h);var d=c("#divSeatMapStaticContent_"+h).find("#seatmapTravelerNameAndSeats").find("#traveler"+g);d.trigger("click");});return{seatSelectionModel:b};})(jQuery);(function(a){jQuery.fn.hasClass=function b(d){if(d&&typeof d.test==="function"){for(var g=0,f=this.length;g<f;g++){var h=this[g].className.split(/\s+/);for(var j=0,e=h.length;j<e;j++){if(d.test(h[j])){return true;}}}return false;}else{return a.call(this,d);}};})(jQuery.fn.hasClass);(function(a){jQuery.fn.removeClass=function(e){if(e&&typeof e.test==="function"){for(var c=0,b=this.length;c<b;c++){var d=this[c];if(d.nodeType===1&&d.className){var f=d.className.split(/\s+/);for(var g=f.length;g--;){if(e.test(f[g])){f.splice(g,1);}}d.className=jQuery.trim(f.join(" "));}}}else{a.call(this,e);}return this;};})(jQuery.fn.removeClass);
/*!  generated on 2015-09-17 19:49:11.076 PDT(-0700) in 1 ms  */

/*!  served in 1 ms  */
